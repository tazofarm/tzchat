<template>
  <ion-page>
    <!-- ✅ 상단 헤더 -->
    <ion-header>
      <ion-toolbar>
        <!-- 뒤로가기 버튼 -->
        <ion-buttons slot="start">
          <ion-button class="back-btn" @click="goBack" aria-label="뒤로가기">
            ←
          </ion-button>
        </ion-buttons>

        <!-- 가운데 제목 -->
        <ion-title>이용약관</ion-title>

        <!-- ✅ 우측: 전체 복사 버튼 -->
        <ion-buttons slot="end">
          <ion-button class="copy-btn" @click="copyTerms" aria-label="약관 전체 복사">
            복사
          </ion-button>
        </ion-buttons>
      </ion-toolbar>
    </ion-header>

    <!-- ✅ 본문 -->
    <ion-content class="ion-padding content-light">
      <!-- 안내 라벨 -->
      <div class="hint" role="note">
        아래 내용은 드래그/복사 시 줄바꿈이 유지되도록 구성되었습니다. (검은 글씨)
      </div>

      <!-- ✅ 약관 본문: pre로 줄바꿈/공백 유지 -->
      <pre class="terms-text" aria-label="채팅/데이팅 앱 이용약관 전문">
{{ terms }}
      </pre>
    </ion-content>
  </ion-page>
</template>

<script setup lang="ts">
import {
  IonPage,
  IonHeader,
  IonToolbar,
  IonButtons,
  IonButton,
  IonTitle,
  IonContent
} from '@ionic/vue'
import { useRouter } from 'vue-router'

const router = useRouter()

/**
 * ✅ 약관 텍스트
 * - 드래그/복사 시 번호 유실 방지를 위해 제목은 '제 x조 (제목)' 형태의 일반 텍스트로 구성
 * - 줄바꿈 유지: 템플릿에서 <pre> + CSS white-space: pre-wrap
 * - 필요 시 서버/파일에서 주입 가능 (현재는 상수로 관리)
 */
const terms = `📄 채팅/데이팅 앱 이용약관 (예시 초안)

제 1조 (목적)
이 약관은 [네네챗] (이하 "회사")이 제공하는 채팅·데이팅 서비스(이하 "서비스") 이용과 관련하여 회사와 회원 간의 권리·의무 및 책임 사항을 규정함을 목적으로 합니다.

제 2조 (용어의 정의)
"회원"이라 함은 본 약관에 동의하고 서비스에 가입하여 이용하는 자를 말합니다.
"계정"이라 함은 회원이 서비스를 이용하기 위해 설정한 로그인 ID(아이디)와 비밀번호를 말합니다.
"콘텐츠"라 함은 회원이 서비스 내에서 작성·전송·게시하는 텍스트, 이미지, 영상 등 일체의 자료를 말합니다.
"유료 서비스"라 함은 별도의 비용을 지불하고 이용할 수 있는 기능 또는 서비스를 말합니다.

제 3조 (약관의 효력 및 변경)
본 약관은 회원이 서비스에 가입함과 동시에 효력이 발생합니다.
회사는 필요 시 관련 법령을 위배하지 않는 범위에서 본 약관을 변경할 수 있으며, 변경 시 앱 또는 웹사이트를 통해 공지합니다.
회원은 변경된 약관에 동의하지 않을 경우 탈퇴할 수 있으며, 공지 후 서비스 이용을 계속하면 변경 약관에 동의한 것으로 간주됩니다.

제 4조 (회원 가입 및 계정 관리)
회원은 실제 본인의 정보를 바탕으로 계정을 생성해야 합니다. 허위 정보 기재 시 서비스 이용이 제한될 수 있습니다.
회원은 계정 정보(ID, 비밀번호 등)를 본인이 직접 관리할 책임이 있으며, 제3자에게 양도 또는 공유할 수 없습니다.
미성년자(만 19세 미만)는 서비스 가입이 제한됩니다.

제 5조 (서비스 이용)
회원은 본 약관 및 관련 법령을 준수하여야 하며, 다른 회원의 권리를 침해하거나 사회질서를 해치는 행위를 해서는 안 됩니다.
회사는 서비스의 일부 또는 전부를 사전 공지 후 변경·중단할 수 있습니다.
회사는 회원의 서비스 이용 기록을 보관·활용하여 서비스 품질 향상 및 안전한 운영을 도모할 수 있습니다.

제 6조 (금지 행위)
회원은 서비스 이용 시 다음 각 호의 행위를 해서는 안 됩니다.
타인의 개인정보를 도용하거나 허위 정보 등록
음란물, 불법 촬영물, 폭력적 콘텐츠 게시 또는 전송
상업적 광고, 스팸 메시지 발송
다른 회원에 대한 스토킹, 괴롭힘, 명예훼손, 협박 등
법령에 위반되거나 사회적 물의를 일으킬 수 있는 행위

제 7조 (콘텐츠의 관리)
회원이 서비스 내에 게시한 콘텐츠에 대한 책임은 전적으로 회원에게 있습니다.
회사는 법령 위반, 신고, 약관 위반이 확인된 경우 사전 통지 없이 해당 콘텐츠를 삭제하거나 노출을 제한할 수 있습니다.
회원이 게시한 콘텐츠는 서비스 운영·홍보 목적 범위 내에서 활용될 수 있습니다.

제 8조 (유료 서비스 및 결제)
회사는 일부 기능을 유료로 제공할 수 있으며, 가격·결제 방법은 별도 공지합니다.
유료 서비스 결제 시 환불 정책은 관련 법령 및 스토어 정책(구글 플레이, 앱스토어 등)에 따릅니다.
환불이 제한되는 경우(기간 경과, 이용 완료 등)에는 환불이 불가할 수 있습니다.

제 9조 (회원 탈퇴 및 계정 삭제)
회원은 언제든지 앱 내 "회원탈퇴" 메뉴를 통해 탈퇴를 신청할 수 있습니다.
탈퇴 신청 시 계정은 즉시 비활성화되며 로그인 및 서비스 이용이 제한됩니다.
탈퇴 신청일로부터 14일의 유예 기간이 적용되며, 해당 기간 동안 회원은 탈퇴를 취소할 수 있습니다.
유예 기간이 경과하면 계정 및 개인정보는 복구할 수 없도록 영구적으로 삭제됩니다.
단, 관계 법령에 따라 일정 기간 보관이 요구되는 정보(결제, 이용 기록 등)는 별도 분리 보관 후 법정 보관기간 종료 시 즉시 파기합니다.
탈퇴 후에도 다른 회원의 기기에 남아 있는 채팅 메시지는 상대방의 기록 보존을 위해 유지될 수 있으며, 발신자 정보는 "탈퇴한 사용자"로 표시됩니다.
백업본에 저장된 데이터는 최대 90일 이내에 순차적으로 삭제됩니다.

제 10조 (개인정보 보호)
회사는 회원의 개인정보를 「개인정보 보호법」 등 관련 법령에 따라 안전하게 관리합니다.
회원의 개인정보 수집·이용·보관·삭제 정책은 별도의 「개인정보 처리방침」을 통해 고지합니다.
회원은 개인정보 열람·수정·삭제를 요청할 권리가 있습니다.

제 11조 (계정 정지 및 강제 탈퇴)
회원이 본 약관 또는 법령을 위반한 경우 회사는 서비스 이용을 제한하거나 계정을 강제 탈퇴 처리할 수 있습니다.
불법 행위가 발견되면 관계 기관에 신고될 수 있습니다.

제 12조 (면책 조항)
회사는 회원 간 발생한 분쟁에 개입하지 않으며, 그로 인한 책임을 지지 않습니다.
회사는 천재지변, 시스템 장애, 외부 요인으로 인한 서비스 중단에 대해서는 책임을 지지 않습니다.
회사는 회원이 서비스 이용 중 게시한 정보·자료의 신뢰성·정확성에 대해 보증하지 않습니다.

제 13조 (기타)
본 약관에 명시되지 않은 사항은 관계 법령 및 일반 상관례에 따릅니다.
본 약관은 2025년 __월 __일부터 시행됩니다.
`;

/** 뒤로가기 */
const goBack = () => {
  console.log('[TermsPage] 뒤로가기 클릭')
  router.back()
}

/** ✅ 약관 전체 복사 */
const copyTerms = async () => {
  try {
    await navigator.clipboard.writeText(terms)
    console.log('[TermsPage] 약관 전체 복사 성공')
    // 필요 시 토스트 등 UI 알림 연결 가능
  } catch (e) {
    console.error('[TermsPage] 약관 복사 실패:', e)
    // fallback: 선택/드래그 안내 등
  }
}
</script>

<style scoped>
/* =========================
   헤더 / 버튼
   ========================= */
ion-toolbar {
  --background: #1e1e1e; /* 다크 헤더 유지 */
  --color: #fff;
  padding: 0 6px;
  min-height: 48px;
}
ion-title {
  font-weight: 600;
  font-size: clamp(16px, 4vw, 18px);
  color: #fff;
  text-align: center;
}
.back-btn,
.copy-btn {
  color: #fff;
  font-size: clamp(14px, 3.6vw, 16px);
  font-weight: 600;
  padding: 4px 8px;
  min-width: 40px;
}
.back-btn:hover,
.copy-btn:hover {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 6px;
}

/* =========================
   본문 (가독성: 검은 글씨)
   ========================= */
.content-light {
  --background: #fafafa; /* 밝은 배경으로 변경 */
}

/* 안내문 */
.hint {
  color: #444;
  font-size: clamp(13px, 3.5vw, 14px);
  margin-bottom: 10px;
}

/* 약관 본문: 줄바꿈/공백 유지 + 검은 글씨 */
.terms-text {
  color: #111;                /* ✅ 검은 글씨 */
  font-size: clamp(14px, 3.8vw, 16px);
  line-height: 1.6;
  white-space: pre-wrap;      /* 줄바꿈/공백 유지 */
  word-break: keep-all;       /* 한국어 단어 단위 줄바꿈 */
  background: #fff;           /* 흰 배경 카드 느낌 */
  border: 1px solid #e9e9e9;
  border-radius: 10px;
  padding: 14px;
  box-shadow: 0 1px 2px rgba(0,0,0,0.04);
}
</style>
